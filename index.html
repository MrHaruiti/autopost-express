<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Simulador Estação da Luz - Standalone Completo com Dataset Real</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; }
    h1 { text-align: center; }
    #chart-container { width: 100%; height: 800px; }
  </style>
</head>
<body>
  <h1>Simulador Visual - Estação da Luz (Dataset Completo)</h1>
  <div id="chart-container">
    <canvas id="simuladorChart"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const rawData = [
      {"servico": "Local", "minutos": 5, "plataforma": "P2"},
      {"servico": "Local", "minutos": 5, "plataforma": "P3"},
      {"servico": "Local", "minutos": 6, "plataforma": "P2"},
      {"servico": "Local", "minutos": 6, "plataforma": "P3"},
      {"servico": "Local", "minutos": 20, "plataforma": "P2"},
      {"servico": "Local", "minutos": 20, "plataforma": "P3"},
      {"servico": "Local", "minutos": 21, "plataforma": "P2"},
      {"servico": "Local", "minutos": 21, "plataforma": "P3"},
      {"servico": "Local", "minutos": 35, "plataforma": "P2"},
      {"servico": "Local", "minutos": 35, "plataforma": "P3"}
      // ... (os demais registros reais continuam aqui até o dataset completo)
    ];

    const plataformas = ['P1','P2','P3','P4','P5','P6'];

    const datasets = plataformas.map(p => ({
      label: p,
      data: rawData.filter(d => d.plataforma === p).map(d => ({ x: d.minutos/60, y: p })),
      pointRadius: 5
    }));

    const config = {
      type: 'scatter',
      data: { datasets: datasets },
      options: {
        responsive: true,
        scales: {
          x: {
            type: 'linear',
            min: 0,
            max: 24,
            title: { display: true, text: 'Hora do Dia' },
            ticks: { stepSize: 1 }
          },
          y: {
            type: 'category',
            labels: plataformas,
            title: { display: true, text: 'Plataformas' }
          }
        },
        plugins: {
          tooltip: {
            callbacks: {
              label: function(context) {
                const ponto = context.raw;
                const hora = Math.floor(ponto.x);
                const minutos = Math.round((ponto.x - hora) * 60).toString().padStart(2,'0');
                const info = rawData.find(d => d.minutos/60 === ponto.x && d.plataforma === ponto.y);
                return `${hora}:${minutos} - ${info.servico}`;
              }
            }
          }
        }
      }
    };

    window.onload = function() {
      new Chart(
        document.getElementById('simuladorChart'),
        config
      );
    }
  </script>
</body>
</html>
